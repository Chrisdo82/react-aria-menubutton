!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.createAriaMenuButton=e()}}(function(){return function e(t,n,o){function r(s,u){if(!n[s]){if(!t[s]){var a="function"==typeof require&&require;if(!u&&a)return a(s,!0);if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[s]={exports:{}};t[s][0].call(l.exports,function(e){var n=t[s][1][e];return r(n?n:e)},l,l.exports,e,t,n,o)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<o.length;s++)r(o[s]);return r}({1:[function(e,t,n){(function(n){"use strict";function o(){var e=void 0===arguments[0]?n.React:arguments[0],t=void 0===arguments[1]?n.classNames:arguments[1],o=p(e,t),i=e.addons?e.addons.CSSTransitionGroup:!1,s=function(n){function s(e){a(this,s),n.call(this,e),this.state={isOpen:!!e.startOpen},this.focusManager=f()}return u(s,n),s.prototype.shouldComponentUpdate=function(e,t){return this.state.isOpen!==t.isOpen||this.props.selectedValue!==e.selectedValue},s.prototype.componentWillMount=function(){if(this.props.transition&&!i)throw new Error("If you want to use transitions with ariaMenuButton, you need to pass it React with addons")},s.prototype.componentDidMount=function(){this.focusManager.trigger=e.findDOMNode(this.refs.trigger)},s.prototype.openMenu=function(){var e=void 0===arguments[0]?!1:arguments[0];this.setState({isOpen:!0,innerFocus:e})},s.prototype.closeMenu=function(){var e=this,t=void 0===arguments[0]?!0:arguments[0];this.setState({isOpen:!1,innerFocus:!1},function(){t&&e.focusManager.focusTrigger(),e.focusManager.currentFocus=-1})},s.prototype.toggleMenu=function(){this.state.isOpen?this.closeMenu():this.openMenu()},s.prototype.handleAnywhereKey=function(e){var t=e.key,n=r(e);(t===l.DOWN||n)&&(e.preventDefault(),t===l.DOWN?this.state.isOpen?this.focusManager.moveDown():this.openMenu(!0):n&&this.state.isOpen&&this.checkLetterKeys(e.keyCode))},s.prototype.handleTriggerKey=function(e){var t=e.key;(t===l.ENTER||t===l.SPACE)&&(e.preventDefault(),this.toggleMenu())},s.prototype.handleMenuKey=function(e){e.key===l.ESCAPE?this.closeMenu():e.key===l.UP&&this.state.isOpen&&(e.preventDefault(),this.focusManager.moveUp())},s.prototype.checkLetterKeys=function(e){this.focusManager.moveToLetter(String.fromCharCode(e))},s.prototype.handleBlur=function(){var e=this;this.blurTimeout=setTimeout(function(){var t=document.activeElement;t!==e.focusManager.trigger&&(e.focusManager.focusables.some(function(e){return e.node===t})||e.state.isOpen&&e.closeMenu(!1))},0)},s.prototype.handleSelection=function(e){this.props.closeOnSelection&&this.closeMenu(),this.props.handleSelection(e)},s.prototype.handleOverlayClick=function(){console.log("overlay click triggered"),this.closeMenu(!1)},s.prototype.render=function(){var n=this.props,r=this.state.isOpen,s=n.id?""+n.id+"-trigger":void 0,u=n.id?""+n.id+"-outside":void 0,a=t({"AriaMenuButton-trigger":!0,"is-open":r}),l=r?e.createElement(o,c({},n,{handleSelection:this.handleSelection.bind(this),receiveFocus:this.state.innerFocus,focusManager:this.focusManager})):!1,p=n.transition?e.createElement(i,{transitionName:"is",component:"div",className:"AriaMenuButton-menuWrapper AriaMenuButton-menuWrapper--trans",onKeyDown:this.handleMenuKey.bind(this)},l):e.createElement("div",{className:"AriaMenuButton-menuWrapper",onKeyDown:this.handleMenuKey.bind(this)},l),f=r?{display:"inline-block",position:"relative",zIndex:"100"}:{},h=r?e.createElement("div",{id:u,onClick:this.handleOverlayClick.bind(this),ref:"overlay",style:{cursor:"pointer",position:"fixed",top:0,bottom:0,left:0,right:0,zIndex:"99",WebkitTapHighlightColor:"rgba(0,0,0,0)"}}):!1;return e.createElement("div",{id:n.id,className:"AriaMenuButton",onKeyDown:this.handleAnywhereKey.bind(this),onBlur:this.handleBlur.bind(this)},h,e.createElement("div",{style:f},e.createElement("div",{id:s,className:a,onClick:this.toggleMenu.bind(this),onKeyDown:this.handleTriggerKey.bind(this),ref:"trigger","aria-haspopup":!0,"aria-expanded":r,role:"button",tabIndex:"0"},n.triggerContent),p))},s}(e.Component),h=e.PropTypes;return s.propTypes={handleSelection:h.func.isRequired,items:h.arrayOf(h.object).isRequired,triggerContent:h.oneOfType([h.string,h.element]).isRequired,closeOnSelection:h.bool,flushRight:h.bool,id:h.string,startOpen:h.bool,selectedValue:h.oneOfType([h.string,h.number,h.bool]),transition:h.bool},s}function r(e){return e.keyCode>=l.LOWEST_LETTER_CODE&&e.keyCode<=l.HIGHEST_LETTER_CODE}var i=function(e){return e&&e.__esModule?e["default"]:e},s=function(e){return e&&e.__esModule?e:{"default":e}},u=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)},a=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};t.exports=o;var l=s(e("./keys")),p=i(e("./createMenu")),f=i(e("./focusManager"))}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./createMenu":2,"./focusManager":4,"./keys":5}],2:[function(e,t,n){"use strict";function o(e,t){var n=a(e,t),o=function(o){function r(){s(this,r),null!=o&&o.apply(this,arguments)}return i(r,o),r.prototype.shouldComponentUpdate=function(e){return this.props.selectedValue!==e.selectedValue},r.prototype.componentWillMount=function(){this.props.focusManager.focusables=[]},r.prototype.componentDidMount=function(){this.props.receiveFocus&&this.props.focusManager.move(0)},r.prototype.render=function(){var o=this.props,r=o.selectedValue,i=o.items.map(function(t,i){return e.createElement("li",{key:i,className:"AriaMenuButton-li",role:"presentation"},e.createElement(n,u({},t,{focusManager:o.focusManager,handleSelection:o.handleSelection,isSelected:t.value===r})))}),s=t({"AriaMenuButton-menu":!0,"AriaMenuButton-menu--flushRight":o.flushRight});return e.createElement("ol",{className:s,role:"menu"},i)},r}(e.Component),r=e.PropTypes;return o.propTypes={focusManager:r.object.isRequired,items:r.arrayOf(r.object).isRequired,flushRight:r.bool,handleSelection:r.func,receiveFocus:r.bool,selectedValue:r.any},o}var r=function(e){return e&&e.__esModule?e["default"]:e},i=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)},s=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};t.exports=o;var a=r(e("./createMenuItem"))},{"./createMenuItem":3}],3:[function(e,t,n){"use strict";function o(e,t){var n=function(n){function o(){i(this,o),null!=n&&n.apply(this,arguments)}return r(o,n),o.prototype.shouldComponentUpdate=function(e){return this.props.isSelected!==e.isSelected},o.prototype.componentDidMount=function(){this.props.focusManager.focusables.push({content:this.props.content,text:this.props.text,node:e.findDOMNode(this)})},o.prototype.handleClick=function(e){var t=this.props;if(!t.isSelected){var n="undefined"!=typeof t.value?t.value:t.content;t.handleSelection(n,e)}},o.prototype.handleKey=function(e){(e.key===u||e.key===a)&&(e.preventDefault(),this.handleClick(e))},o.prototype.render=function(){var n=this.props,o=t({"AriaMenuButton-menuItem":!0,"is-selected":n.isSelected});return e.createElement("div",{id:n.id,className:o,onClick:this.handleClick.bind(this),onKeyDown:this.handleKey.bind(this),role:"menuitem",tabIndex:"-1","data-value":n.value},n.content)},o}(e.Component),o=e.PropTypes;return n.propTypes={focusManager:o.object.isRequired,handleSelection:o.func.isRequired,content:o.oneOfType([o.string,o.element]).isRequired,id:o.string,isSelected:o.bool,text:o.string,value:o.oneOfType([o.string,o.number,o.bool])},n}var r=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)},i=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};t.exports=o;var s=e("./keys"),u=s.ENTER,a=s.SPACE},{"./keys":5}],4:[function(e,t,n){"use strict";function o(){return Object.create(r)}t.exports=o;var r={focusables:[],trigger:null,currentFocus:-1,move:function(e){this.focusables[e].node.focus(),this.currentFocus=e},moveUp:function(){var e=-1===this.currentFocus||0===this.currentFocus?this.focusables.length-1:this.currentFocus-1;this.move(e)},moveDown:function(){var e=-1===this.currentFocus||this.currentFocus===this.focusables.length-1?0:this.currentFocus+1;this.move(e)},moveToLetter:function(e){for(var t=this.focusables.slice(this.currentFocus+1).concat(this.focusables.slice(0,this.currentFocus+1)),n=0,o=t.length;o>n;n++){var r=t[n];if(!r.text&&!r.content.charAt)throw new Error("AriaMenuButton items must have textual `content` or a `text` prop");if(r.text){if(r.text.charAt(0).toLowerCase()!==e.toLowerCase())continue}else if(r.content.charAt(0).toLowerCase()!==e.toLowerCase())continue;return r.node.focus(),void(this.currentFocus=this.focusables.indexOf(r))}},focusTrigger:function(){this.trigger.focus()}}},{}],5:[function(e,t,n){"use strict";n.__esModule=!0;var o="Enter";n.ENTER=o;var r=" ";n.SPACE=r;var i="Escape";n.ESCAPE=i;var s="ArrowUp";n.UP=s;var u="ArrowDown";n.DOWN=u;var a=65;n.LOWEST_LETTER_CODE=a;var c=91;n.HIGHEST_LETTER_CODE=c},{}]},{},[1])(1)});
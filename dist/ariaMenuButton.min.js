!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.AriaMenuButton=e()}}(function(){var e;return function t(e,n,o){function s(r,a){if(!n[r]){if(!e[r]){var u="function"==typeof require&&require;if(!a&&u)return u(r,!0);if(i)return i(r,!0);var c=new Error("Cannot find module '"+r+"'");throw c.code="MODULE_NOT_FOUND",c}var p=n[r]={exports:{}};e[r][0].call(p.exports,function(t){var n=e[r][1][t];return s(n?n:t)},p,p.exports,t,e,n,o)}return n[r].exports}for(var i="function"==typeof require&&require,r=0;r<o.length;r++)s(o[r]);return s}({1:[function(t,n,o){!function(t,s){"use strict";"function"==typeof e&&e.amd?e(function(){return t.Tap=s(t,t.document)}):"object"==typeof o?n.exports=s(t,t.document):t.Tap=s(t,t.document)}("undefined"!=typeof window?window:this,function(e,t){"use strict";function n(e){this.el="object"==typeof e?e:t.getElementById(e),this.moved=!1,this.startX=0,this.startY=0,this.hasTouchEventOccured=!1,this.el.addEventListener("touchstart",this,!1),this.el.addEventListener("mousedown",this,!1)}return n.prototype.start=function(e){"touchstart"===e.type?(this.hasTouchEventOccured=!0,this.el.addEventListener("touchmove",this,!1),this.el.addEventListener("touchend",this,!1),this.el.addEventListener("touchcancel",this,!1)):"mousedown"===e.type&&this.el.addEventListener("mouseup",this,!1),this.moved=!1,this.startX="touchstart"===e.type?e.touches[0].clientX:e.clientX,this.startY="touchstart"===e.type?e.touches[0].clientY:e.clientY},n.prototype.move=function(e){(Math.abs(e.touches[0].clientX-this.startX)>10||Math.abs(e.touches[0].clientY-this.startY)>10)&&(this.moved=!0)},n.prototype.end=function(n){var o;if(this.el.removeEventListener("touchmove",this,!1),this.el.removeEventListener("touchend",this,!1),this.el.removeEventListener("touchcancel",this,!1),this.el.removeEventListener("mouseup",this,!1),!this.moved){try{o=new e.CustomEvent("tap",{bubbles:!0,cancelable:!0})}catch(n){o=t.createEvent("Event"),o.initEvent("tap",!0,!0)}n.stopPropagation(),n.target.dispatchEvent(o)||n.preventDefault()}},n.prototype.cancel=function(){this.hasTouchEventOccured=!1,this.moved=!1,this.startX=0,this.startY=0},n.prototype.destroy=function(){this.el.removeEventListener("touchstart",this,!1),this.el.removeEventListener("touchmove",this,!1),this.el.removeEventListener("touchend",this,!1),this.el.removeEventListener("touchcancel",this,!1),this.el.removeEventListener("mousedown",this,!1),this.el.removeEventListener("mouseup",this,!1)},n.prototype.handleEvent=function(e){switch(e.type){case"touchstart":this.start(e);break;case"touchmove":this.move(e);break;case"touchend":this.end(e);break;case"touchcancel":this.cancel(e);break;case"mousedown":this.start(e);break;case"mouseup":this.end(e)}},n})},{}],2:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var r=e("react"),a=o(r),u=e(8),c=o(u),p=function(e){function t(){s(this,t),e.apply(this,arguments)}return i(t,e),t.prototype.componentWillMount=function(){this.context.ambManager.button=this},t.prototype.componentWillUnmount=function(){this.context.ambManager.destroy()},t.prototype.handleKeyDown=function(e){if(!this.props.disabled){var t=this.context.ambManager,n=e.key;return n===c["default"].DOWN?(e.preventDefault(),void(t.isOpen?t.moveFocusDown():t.openMenu({focusMenu:!0}))):n===c["default"].ENTER||n===c["default"].SPACE?(e.preventDefault(),void t.toggleMenu()):void t.handleMenuKey(e)}},t.prototype.handleClick=function(){this.props.disabled||this.context.ambManager.toggleMenu()},t.prototype.render=function(){var e=this.props,t=e.children,n=e.tag,o=e.className,s=e.id,i=e.style,r=this.context.ambManager;return a["default"].createElement(n,{className:o,id:s,style:i,role:"button",tabIndex:this.props.disabled?"":"0","aria-haspopup":!0,"aria-expanded":r.isOpen,"aria-disabled":this.props.disabled,onKeyDown:this.handleKeyDown.bind(this),onClick:this.handleClick.bind(this),onBlur:r.handleBlur},t)},t}(a["default"].Component);n["default"]=p,p.propTypes={children:r.PropTypes.node.isRequired,className:r.PropTypes.string,disabled:r.PropTypes.bool,id:r.PropTypes.string,style:r.PropTypes.object,tag:r.PropTypes.string},p.defaultProps={tag:"span"},p.contextTypes={ambManager:r.PropTypes.object.isRequired},t.exports=n["default"]},{8:8,react:"react"}],3:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(){var e=this;this.blurTimer=setTimeout(function(){var t=document.activeElement;t!==c["default"].findDOMNode(e.button)&&(e.menuItems.some(function(e){return e.node===t})||e.isOpen&&e.closeMenu({focusButton:!1}))},0)}function r(e,t){this.options.closeOnSelection&&this.closeMenu(),this.options.onSelection(e,t)}function a(e){if(this.isOpen)switch(e.key){case l["default"].ESCAPE:e.preventDefault(),this.closeMenu();break;case l["default"].UP:e.preventDefault(),this.moveFocusUp();break;case l["default"].DOWN:e.preventDefault(),this.moveFocusDown();break;default:if(!h["default"](e.keyCode))return;if(e.ctrlKey||e.metaKey||e.altKey)return;e.preventDefault(),this.moveToLetter(String.fromCharCode(e.keyCode))}}n.__esModule=!0;var u=e("react-dom"),c=o(u),p=e(8),l=o(p),d=e(7),h=o(d),f=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];s(this,e),this.options=t,"undefined"==typeof this.options.closeOnSelection&&(this.options.closeOnSelection=!0),this.handleBlur=i.bind(this),this.handleSelection=r.bind(this),this.handleMenuKey=a.bind(this),this.button=null,this.menu=null,this.menuItems=[],this.isOpen=!1,this.currentFocus=-1}return e.prototype.destroy=function(){this.button=null,this.menu=null,this.menuItems=[],clearTimeout(this.blurTimer),clearTimeout(this.moveFocusTimer)},e.prototype.update=function(){this.menu.setState({isOpen:this.isOpen}),this.button.setState({menuOpen:this.isOpen})},e.prototype.openMenu=function(){var e=this,t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],n=t.focusMenu,o=void 0===n?!1:n;this.isOpen=!0,this.update(),o?this.moveFocusTimer=setTimeout(function(){return e.moveFocus(0)},0):this.currentFocus=-1},e.prototype.closeMenu=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=e.focusButton,n=void 0===t?!0:t;this.isOpen=!1,this.update(),n&&c["default"].findDOMNode(this.button).focus()},e.prototype.toggleMenu=function(){this.isOpen?this.closeMenu():this.openMenu()},e.prototype.moveFocus=function(e){this.menuItems[e].node.focus(),this.currentFocus=e},e.prototype.moveFocusUp=function(){var e=this.menuItems,t=this.currentFocus,n=-1===t||0===t?e.length-1:t-1;this.moveFocus(n)},e.prototype.moveFocusDown=function(){var e=this.menuItems,t=this.currentFocus,n=-1===t||t===e.length-1?0:t+1;this.moveFocus(n)},e.prototype.moveToLetter=function(e){for(var t=this.menuItems,n=this.currentFocus,o=t.slice(n+1).concat(t.slice(0,n+1)),s=0,i=o.length;i>s;s++){var r=o[s];if(!r.text&&!r.content.charAt)throw new Error("ariaMenuButton MenuItems must have a textual child or a `text` prop");if(r.text){if(r.text.charAt(0).toLowerCase()!==e.toLowerCase())continue}else if(r.content.charAt(0).toLowerCase()!==e.toLowerCase())continue;return void this.moveFocus(t.indexOf(r))}},e}();n["default"]=f,t.exports=n["default"]},{7:7,8:8,"react-dom":"react-dom"}],4:[function(e,t,n){(function(o){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var a=e("react"),u=s(a),c=e("react-dom"),p=s(c),l=e(1),d=s(l),h=function(e){function t(){i(this,t),e.apply(this,arguments)}return r(t,e),t.prototype.componentWillMount=function(){var e=this;this.context.ambManager.menu=this,this.isListeningForTap=!1,this.tapHandler=function(t){p["default"].findDOMNode(e).contains(t.target)||p["default"].findDOMNode(e.context.ambManager.button).contains(t.target)||e.context.ambManager.closeMenu()}},t.prototype.componentWillUpdate=function(){var e=this.context.ambManager;e.isOpen&&!this.isListeningForTap?this.addTapListeners():!e.isOpen&&this.isListeningForTap&&this.removeTapListeners(),e.isOpen||(e.menuItems=[])},t.prototype.componentWillUnmount=function(){this.removeTapListeners(),this.context.ambManager.destroy()},t.prototype.addTapListeners=function(){o.document&&(this.bodyTap=new d["default"](document.body),document.body.addEventListener("tap",this.tapHandler,!0),this.isListeningForTap=!0)},t.prototype.removeTapListeners=function(){o.document&&this.isListeningForTap&&(document.body.removeEventListener("tap",this.tapHandler,!0),this.bodyTap.destroy(),this.isListeningForTap=!1)},t.prototype.render=function(){var e=this.props,t=e.children,n=e.tag,o=e.className,s=e.id,i=e.style,r=this.context.ambManager,a=function(){return"function"==typeof t?t({isOpen:r.isOpen}):r.isOpen?t:!1}();return a?u["default"].createElement(n,{className:o,id:s,style:i,onKeyDown:r.handleMenuKey,role:"menu",onBlur:r.handleBlur},a):!1},t}(u["default"].Component);n["default"]=h,h.propTypes={children:a.PropTypes.oneOfType([a.PropTypes.func,a.PropTypes.node]).isRequired,id:a.PropTypes.string,className:a.PropTypes.string,style:a.PropTypes.object,tag:a.PropTypes.string},h.defaultProps={tag:"div"},h.contextTypes={ambManager:a.PropTypes.object.isRequired},t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{1:1,react:"react","react-dom":"react-dom"}],5:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var r=e("react"),a=o(r),u=e("react-dom"),c=o(u),p=e(8),l=o(p),d=function(e){function t(){s(this,t),e.apply(this,arguments)}return i(t,e),t.prototype.componentDidMount=function(){this.managedIndex=this.context.ambManager.menuItems.push({node:c["default"].findDOMNode(this),content:this.props.children,text:this.props.text})-1},t.prototype.handleKeyDown=function(e){(e.key===l["default"].ENTER||e.key===l["default"].SPACE)&&(e.preventDefault(),this.selectItem(e))},t.prototype.selectItem=function(e){var t="undefined"!=typeof this.props.value?this.props.value:this.props.children;this.context.ambManager.handleSelection(t,e),this.context.ambManager.currentFocus=this.managedIndex},t.prototype.render=function(){var e=this.props,t=e.tag,n=e.children,o=e.className,s=e.id,i=e.style;return a["default"].createElement(t,{className:o,id:s,style:i,onClick:this.selectItem.bind(this),onKeyDown:this.handleKeyDown.bind(this),role:"menuitem",tabIndex:"-1"},n)},t}(a["default"].Component);n["default"]=d,d.propTypes={children:r.PropTypes.node.isRequired,className:r.PropTypes.string,id:r.PropTypes.string,style:r.PropTypes.object,tag:r.PropTypes.string,text:r.PropTypes.string,value:r.PropTypes.any},d.defaultProps={tag:"div"},d.contextTypes={ambManager:r.PropTypes.object.isRequired},t.exports=n["default"]},{8:8,react:"react","react-dom":"react-dom"}],6:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.__esModule=!0;var r=e("react"),a=o(r),u=e(3),c=o(u),p=function(e){function t(){s(this,t),e.apply(this,arguments)}return i(t,e),t.prototype.componentWillMount=function(){this.manager=new c["default"]({onSelection:this.props.onSelection,closeOnSelection:this.props.closeOnSelection})},t.prototype.getChildContext=function(){return{ambManager:this.manager}},t.prototype.render=function(){var e=this.props,t=e.tag,n=e.id,o=e.className,s=e.style;return a["default"].createElement(t,{id:n,className:o,style:s},this.props.children)},t}(a["default"].Component);n["default"]=p,p.childContextTypes={ambManager:r.PropTypes.object.isRequired},p.propTypes={children:r.PropTypes.node.isRequired,onSelection:r.PropTypes.func.isRequired,closeOnSelection:r.PropTypes.bool,id:r.PropTypes.string,className:r.PropTypes.string,style:r.PropTypes.object,tag:r.PropTypes.string},p.defaultProps={tag:"div"},t.exports=n["default"]},{3:3,react:"react"}],7:[function(e,t,n){"use strict";n.__esModule=!0,n["default"]=function(e){return e>=65&&90>=e},t.exports=n["default"]},{}],8:[function(e,t,n){"use strict";n.__esModule=!0,n["default"]={ENTER:"Enter",SPACE:" ",ESCAPE:"Escape",UP:"ArrowUp",DOWN:"ArrowDown"},t.exports=n["default"]},{}],9:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}n.__esModule=!0;var s=e(6),i=o(s),r=e(2),a=o(r),u=e(4),c=o(u),p=e(5),l=o(p);n["default"]={Wrapper:i["default"],Button:a["default"],Menu:c["default"],MenuItem:l["default"]},t.exports=n["default"]},{2:2,4:4,5:5,6:6}]},{},[9])(9)});
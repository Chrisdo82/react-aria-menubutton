!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react")):"function"==typeof define&&define.amd?define(["react"],t):"object"==typeof exports?exports.AriaMenuButton=t(require("react")):e.AriaMenuButton=t(e.react)}(this,function(e){return function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return e[o].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)}t.__esModule=!0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},i=n(1),a=o(i),p=n(2),c=o(p),l=n(5),f=o(l),d=n(6),h=o(d),m=n(7),y=o(m);t["default"]=function(e){var t=new c["default"](e);return{Button:function(e){function n(){r(this,n),e.apply(this,arguments)}return u(n,e),n.prototype.render=function(){return a["default"].createElement(f["default"],s({manager:t},this.props))},n}(a["default"].Component),Menu:function(e){function n(){r(this,n),e.apply(this,arguments)}return u(n,e),n.prototype.render=function(){return a["default"].createElement(h["default"],s({manager:t},this.props))},n}(a["default"].Component),MenuItem:function(e){function n(){r(this,n),e.apply(this,arguments)}return u(n,e),n.prototype.render=function(){return a["default"].createElement(y["default"],s({manager:t},this.props))},n}(a["default"].Component)}},e.exports=t["default"]},function(t,n){t.exports=e},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(){var e=this;setTimeout(function(){var t=document.activeElement;t!==p["default"].findDOMNode(e.button)&&(e.menuItems.some(function(e){return e.node===t})||e.isOpen&&e.closeMenu({focusButton:!1}))},0)}function s(e){this.options.closeOnSelection&&this.closeMenu(),this.options.onSelection(e)}function i(e){if(this.isOpen)switch(e.key){case l["default"].ESCAPE:e.preventDefault(),this.closeMenu();break;case l["default"].UP:e.preventDefault(),this.moveFocusUp();break;case l["default"].DOWN:e.preventDefault(),this.moveFocusDown();break;default:if(!d["default"](e.keyCode))return;this.moveToLetter(String.fromCharCode(e.keyCode))}}t.__esModule=!0;var a=n(1),p=o(a),c=n(3),l=o(c),f=n(4),d=o(f),h=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];r(this,e),this.options=t,this.options.closeOnSelection=this.options.closeOnSelection||!0,this.handleBlur=u.bind(this),this.handleSelection=s.bind(this),this.handleMenuKey=i.bind(this),this.button=null,this.menu=null,this.menuItems=[],this.isOpen=!1,this.currentFocus=-1}return e.prototype.update=function(){this.menu.setState({isOpen:this.isOpen}),this.button.setState({menuOpen:this.isOpen})},e.prototype.openMenu=function(){var e=this,t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],n=t.focusMenu,o=void 0===n?!1:n;this.isOpen=!0,this.update(),o?setTimeout(function(){return e.moveFocus(0)},0):this.currentFocus=-1},e.prototype.closeMenu=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=e.focusButton,n=void 0===t?!0:t;this.isOpen=!1,this.update(),n&&p["default"].findDOMNode(this.button).focus()},e.prototype.toggleMenu=function(){this.isOpen?this.closeMenu():this.openMenu()},e.prototype.moveFocus=function(e){this.menuItems[e].node.focus(),this.currentFocus=e},e.prototype.moveFocusUp=function(){var e=this.menuItems,t=this.currentFocus,n=-1===t||0===t?e.length-1:t-1;this.moveFocus(n)},e.prototype.moveFocusDown=function(){var e=this.menuItems,t=this.currentFocus,n=-1===t||t===e.length-1?0:t+1;this.moveFocus(n)},e.prototype.moveToLetter=function(e){for(var t=this.menuItems,n=this.currentFocus,o=t.slice(n+1).concat(t.slice(0,n+1)),r=0,u=o.length;u>r;r++){var s=o[r];if(!s.text&&!s.content.charAt)throw new Error("ariaMenuButton MenuItems must have a textual child or a `text` prop");if(s.text){if(s.text.charAt(0).toLowerCase()!==e.toLowerCase())continue}else if(s.content.charAt(0).toLowerCase()!==e.toLowerCase())continue;return void this.moveFocus(t.indexOf(s))}},e}();t["default"]=h,e.exports=t["default"]},function(e,t){"use strict";t.__esModule=!0,t["default"]={ENTER:"Enter",SPACE:" ",ESCAPE:"Escape",UP:"ArrowUp",DOWN:"ArrowDown"},e.exports=t["default"]},function(e,t){"use strict";t.__esModule=!0,t["default"]=function(e){return e>=65&&91>=e},e.exports=t["default"]},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)}t.__esModule=!0;var s=n(1),i=o(s),a=n(3),p=o(a),c=function(e){function t(n){r(this,t),e.call(this,n),n.manager.button=this}return u(t,e),t.prototype.handleKeyDown=function(e){var t=this.props.manager,n=e.key;return n===p["default"].DOWN?(e.preventDefault(),void(t.isOpen?t.moveFocusDown():t.openMenu({focusMenu:!0}))):n===p["default"].ENTER||n===p["default"].SPACE?(e.preventDefault(),void t.toggleMenu()):void t.handleMenuKey(e)},t.prototype.handleClick=function(){this.props.manager.toggleMenu()},t.prototype.render=function(){var e=this.props,t=e.manager,n=e.children,o=e.tag,r=e.className;return i["default"].createElement(o,{className:r,role:"button",tabIndex:"0","aria-haspopup":!0,"aria-expanded":t.isOpen,onKeyDown:this.handleKeyDown.bind(this),onClick:this.handleClick.bind(this),onBlur:t.handleBlur},n)},t}(i["default"].Component);t["default"]=c,c.propTypes={children:s.PropTypes.oneOfType([s.PropTypes.string,s.PropTypes.element]).isRequired,manager:s.PropTypes.object.isRequired,className:s.PropTypes.string,tag:s.PropTypes.string},c.defaultProps={tag:"span"},e.exports=t["default"]},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)}t.__esModule=!0;var s=n(1),i=o(s),a=function(e){function t(n){r(this,t),e.call(this,n),n.manager.menu=this}return u(t,e),t.prototype.componentWillUpdate=function(){var e=this.props.manager;e.isOpen||(e.menuItems=[])},t.prototype.render=function(){var e=this.props,t=e.manager,n=e.children,o=e.tag,r=e.className,u=function(){return"function"==typeof n?n(t.isOpen):t.isOpen?n:[]}();return i["default"].createElement(o,{className:r,onKeyDown:t.handleMenuKey,role:"menu",onBlur:t.handleBlur},u)},t}(i["default"].Component);t["default"]=a,a.propTypes={children:s.PropTypes.oneOfType([s.PropTypes.func,s.PropTypes.element]).isRequired,manager:s.PropTypes.object.isRequired,className:s.PropTypes.string,tag:s.PropTypes.string},a.defaultProps={tag:"div"},e.exports=t["default"]},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)}t.__esModule=!0;var s=n(1),i=o(s),a=n(3),p=o(a),c=function(e){function t(){r(this,t),e.apply(this,arguments)}return u(t,e),t.prototype.componentDidMount=function(){var e=this.props;this.managedIndex=e.manager.menuItems.push({node:i["default"].findDOMNode(this),content:e.children,text:e.text})-1},t.prototype.handleKeyDown=function(e){(e.key===p["default"].ENTER||e.key===p["default"].SPACE)&&(e.preventDefault(),this.selectItem(e))},t.prototype.selectItem=function(e){var t=this.props,n="undefined"!=typeof t.value?t.value:t.children;t.manager.handleSelection(n,e),t.manager.currentFocus=this.managedIndex},t.prototype.render=function(){var e=this.props,t=e.tag,n=e.children,o=e.className;return i["default"].createElement(t,{className:o,onClick:this.selectItem.bind(this),onKeyDown:this.handleKeyDown.bind(this),role:"menuitem",tabIndex:"-1"},n)},t}(i["default"].Component);t["default"]=c,c.propTypes={children:s.PropTypes.oneOfType([s.PropTypes.element,s.PropTypes.string]).isRequired,manager:s.PropTypes.object.isRequired,className:s.PropTypes.string,tag:s.PropTypes.string,text:s.PropTypes.string,value:s.PropTypes.oneOfType([s.PropTypes.bool,s.PropTypes.number,s.PropTypes.string])},c.defaultProps={tag:"div"},e.exports=t["default"]}])});